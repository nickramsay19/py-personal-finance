{% extends 'layout.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
    <h1>Dashboard</h1><br>
    
    <div class="row">
        <div class="col-md-8">
            <div class="jumbotron jumbo-net-balance">
                <div class="row">
                    <div class="col text-left">
                        <h1><i class="fa fa-dollar-sign"></i></h1>
                    </div>
                    <div class="col text-right">
                        <h1>${{current.amount}}</h1>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md">
            <div class="jumbotron bg-danger jumbo-net-loss">
                <div class="row">
                    <div class="col text-left">
                        <h1><i class="fa fa-shopping-cart"></i></h1>
                    </div>
                    <div class="col text-right">
                            <h1>$467.95</h1>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div class="row">
        <div class="col-md">
            <div class="card border-light mb-3">
                <div class="card-header">
                    Spending Tracker
                </div>
                <div class="card-img-bottom">
                    <canvas id="spendingTracker"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md">
            <div class="card border-light mb-3">
                <div class="card-header">
                    Categorical Spending
                </div>
                <div class="card-img-bottom">
                    <canvas id="monthEssentialsVsNonEssentials"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md">
            <div class="card border-light mb-3">
                <div class="card-header">
                    Transactions
                </div>
                <div class="card-img-bottom">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Date</th>
                                <th scope="col">Amount</th>
                                <th scope="col">Name</th>
                                <th scope="col">Category</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for transaction in transactions[:4] %}
                                <tr>
                                    <td>{{ transaction.date }}</td>
                                    {% if transaction.amount > 0 %}
                                        <td style="color:forestgreen;">+{{ transaction.amount }}</td>
                                    {% else %}
                                        <td style="color:crimson;">{{ transaction.amount }}</td>
                                    {% endif %}
                                    <td>{{ transaction.name }}</td>
                                    <td>{{ transaction.category }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md">
        </div>
    </div>


    <script>
            window.onload = function() {
                // last month essentials vs nonessentials
            var pieData = [
            {
                value: 20,
                color:"#878BB6"
            },
            {
                value : 40,
                color : "#4ACAB4"
            },
            {
                value : 10,
                color : "#FF8153"
            },
            {
                value : 30,
                color : "#FFEA88"
            }
        ];
        // Get the context of the canvas element we want to select
        var countries = document.getElementById("monthEssentialsVsNonEssentials").getContext("2d");
        var monthChart = new Chart(document.getElementById("monthEssentialsVsNonEssentials").getContext("2d"), {
            type: 'pie',
            data: {
                datasets: [{
                    data: [10, 20]
                }],
            
                // These labels appear in the legend and in the tooltips when hovering different arcs
                labels: [
                    'Essentials',
                    'Non Essentials',
                ],
                backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)'
            ]
            }
            
        })

            // spending tracker
            var myChart = new Chart(document.getElementById('spendingTracker').getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                    datasets: [{
                        label: 'Spending',
                        data: [12, 19, 3, 5, 2, 3],
                        backgroundColor: [
                            'rgba(255, 99, 132, 0.2)',
                            'rgba(54, 162, 235, 0.2)',
                            'rgba(255, 206, 86, 0.2)',
                            'rgba(75, 192, 192, 0.2)',
                            'rgba(153, 102, 255, 0.2)',
                            'rgba(255, 159, 64, 0.2)'
                        ],
                        borderColor: [
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)'
                        ],
                        borderWidth: 1
                    }]
                }
            });
            }
            
    </script>
{% endblock %}